<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Evaluador de Aplicativo Educativo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-image: url("fondo CS.jpeg");
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-position: center;
    }

    /* üîπ Barra de navegaci√≥n */
    .navbar {
      display: flex;
      justify-content: center;
      background-color: rgba(0, 0, 0, 0.8);
      padding: 10px 0;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .navbar button {
      background: none;
      border: none;
      color: #ddd;
      font-size: 18px;
      margin: 0 15px;
      cursor: pointer;
      padding-bottom: 5px;
      border-bottom: 2px solid transparent;
      transition: all 0.3s;
    }

    .navbar button:hover {
      color: #fff;
    }

    .navbar button.activo {
      border-bottom: 2px solid #fff;
      color: #fff;
    }

    .container {
      max-width: 900px;
      margin: 40px auto;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }

    section {
      display: none;
    }

    section.activo {
      display: block;
    }

    h1 {
      text-align: center;
    }

    .parametro {
      margin-bottom: 20px;
    }

    .estrellas {
      display: flex;
      gap: 8px;
      margin-top: 5px;
    }

    .estrella-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background-color: #e9ecef;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    .estrella-btn:hover {
      background-color: #ffe082;
      transform: scale(1.1);
    }

    .estrella-btn.activo {
      background-color: #ffc107;
      color: #000;
    }

    .estrellas button {
      background-color: #f4f4f4;
      border: 1px solid #aaa;
      margin: 2px;
      padding: 5px 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s, color 0.2s;
    }

    .estrellas button:hover {
      background-color: #ffe1b3;
    }

    .estrellas button.activo {
      background-color: orange;
      color: white;
      border-color: orange;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <!-- üîπ Barra de navegaci√≥n -->
  <div class="navbar">
    <button class="nav-btn activo" data-seccion="inicio">Inicio</button>
    <button class="nav-btn" data-seccion="normas">Normas</button>
    <button class="nav-btn" data-seccion="autores">Autores</button>
  </div>

  <!-- üîπ SECCIONES -->
  <section id="inicio" class="activo">
    <div class="container">
      <h1>Evaluador de Aplicativo Educativo</h1>
      <p>Califica los siguientes par√°metros del 1 al 5 y deja un comentario opcional.</p>
      <form id="formulario">
        <label>Tu nombre (opcional):</label>
        <input type="text" id="nombre" placeholder="Ej. Mar√≠a" />
        <div id="parametros"></div>
        <label>Comentario (opcional):</label>
        <textarea id="comentario" rows="3" placeholder="Qu√© te gust√≥, qu√© mejorar√≠as..."></textarea>
        <button type="submit" class="btn-enviar">Enviar</button>
        <button type="button" id="btn-limpiar" class="btn-limpiar">Limpiar</button>
      </form>

      <div class="stats">
        <h3>Estad√≠sticas</h3>
        <p>Entradas registradas: <span id="totalEntradas">0</span></p>
        <p>Promedio general: <span id="promedioGeneral">0</span> / 5</p>
        <ul id="promediosLista"></ul>
        <button id="btn-pdf" class="btn-pdf">Descargar PDF</button>
        <button id="btn-borrar" class="btn-borrar">Borrar todo</button>
      </div>

      <div class="comentarios">
        <h3>√öltimas 10 entradas</h3>
        <div id="listaComentarios"></div>
      </div>
    </div>
  </section>

  <!-- üîπ SECCI√ìN NORMAS -->
  <section id="normas">
    <div class="container">
      <h3><a href="https://www.iso.org/standard/78176.html?utm_source=" target="_blank" rel="noopener noreferrer">ISO/IEC 25010 ‚Äì Calidad del Software</a></h3>
      <p><strong>Prop√≥sito:</strong> Define un modelo de calidad para productos de software.</p>
      <p><strong>Aspectos clave:</strong> Establece 8 caracter√≠sticas de calidad (como funcionalidad, confiabilidad, usabilidad, eficiencia, mantenibilidad y portabilidad).</p>
      <p><strong>En resumen:</strong> Sirve para evaluar y mejorar la calidad interna y externa del software.</p>

      <h3><a href="https://www.iso.org/obp/ui#iso:std:iso:9001:ed-5:v1:es" target="_blank" rel="noopener noreferrer">ISO 9001 ‚Äì Gesti√≥n de la Calidad</a></h3>
      <p><strong>Prop√≥sito:</strong> Norma internacional para sistemas de gesti√≥n de calidad aplicable a cualquier tipo de organizaci√≥n.</p>
      <p><strong>Aspectos clave:</strong> Se basa en principios como enfoque al cliente, mejora continua, liderazgo y gesti√≥n por procesos.</p>
      <p><strong>En resumen:</strong> Busca asegurar la calidad de los productos o servicios mediante una gesti√≥n organizacional eficiente.</p>

      <h3><a href="https://cmmiinstitute.com/cmmi/intro-3" target="_blank" rel="noopener noreferrer">CMMI (Capability Maturity Model Integration)</a></h3>
      <p><strong>Prop√≥sito:</strong> Es un modelo para mejorar los procesos de desarrollo y gesti√≥n en organizaciones.</p>
      <p><strong>Aspectos clave:</strong> Define niveles de madurez (del 1 al 5) que reflejan qu√© tan optimizados est√°n los procesos.</p>
      <p><strong>En resumen:</strong> Ayuda a las empresas a mejorar la eficiencia, la calidad y la gesti√≥n de proyectos de software.</p>
    </div>
  </section>

  <!-- üîπ SECCI√ìN AUTORES (actualizada) -->
  <section id="autores">
    <div class="container">
      <h1>Autores</h1>
      <ul>
        <li>Andr√©s Camilo Zambrano Pacheco</li>
        <li>Juan Camilo Olivera Carrillo</li>
        <li>David Humberto Bernal Forigua</li>
      </ul>
      <hr style="margin: 20px 0; border: 1px solid #ccc;" />
      <p><strong>Corporaci√≥n Unificada Nacional de Educaci√≥n Superior ‚Äì CUN</strong></p>
      <p><strong>Ficha:</strong> 54430</p>
    </div>
  </section>

  <!-- üîπ SCRIPT PRINCIPAL -->
  <script>
    const parametros = [
      "Usabilidad","Eficiencia","Seguridad","Mantenibilidad",
      "Compatibilidad","Funcionabilidad","Fiabilidad","Portabilidad"
    ];

    const contenedor = document.getElementById('parametros');
    const listaComentarios = document.getElementById('listaComentarios');
    const promedioGeneralEl = document.getElementById('promedioGeneral');
    const totalEntradasEl = document.getElementById('totalEntradas');
    let calificacionActual = {Usabilidad:0,Eficiencia:0,Seguridad:0,Mantenibilidad:0,Compatibilidad:0,Funcionabilidad:0,Fiabilidad:0,Portabilidad:0};
    let entradas = JSON.parse(localStorage.getItem('calificaciones_app_educativa') || '[]');

    function renderParametros() {
      contenedor.innerHTML = '';
      parametros.forEach(p => {
        if (typeof calificacionActual[p] === 'undefined') calificacionActual[p] = 0;
        const div = document.createElement('div');
        div.className = 'parametro';
        const label = document.createElement('label');
        label.textContent = p;
        const estrellas = document.createElement('div');
        estrellas.className = 'estrellas';
        div.appendChild(label);
        div.appendChild(estrellas);
        contenedor.appendChild(div);
        for (let i = 1; i <= 5; i++) {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.textContent = i;
          if (i <= calificacionActual[p]) btn.classList.add('activo');
          btn.addEventListener('click', () => {
            calificacionActual[p] = i;
            Array.from(estrellas.children).forEach(b => b.classList.remove('activo'));
            for (let j = 0; j < i; j++) estrellas.children[j].classList.add('activo');
          });
          estrellas.appendChild(btn);
        }
      });
    }

    function guardarLocal() {
      localStorage.setItem('calificaciones_app_educativa', JSON.stringify(entradas));
    }

    function actualizarEstadisticas() {
      totalEntradasEl.textContent = entradas.length;
      if (entradas.length === 0) {
        promedioGeneralEl.textContent = 0;
        listaComentarios.innerHTML = '<p>No hay calificaciones a√∫n.</p>';
        return;
      }
      const totalPromedios = entradas.reduce((acc, e) => acc + (Number(e.promedio) || 0), 0);
      const promGeneral = (totalPromedios / entradas.length).toFixed(2);
      promedioGeneralEl.textContent = promGeneral;
      listaComentarios.innerHTML = entradas.slice(0, 10).map(e => `
        <div style='border-bottom:1px solid #ddd; padding:6px 0;'>
          <small>${new Date(e.fecha).toLocaleString()}</small><br>
          <strong>${e.nombre}</strong><br>
          Promedio total: ${e.promedio} / 5<br>
          ${e.comentario ? `<em>"${e.comentario}"</em>` : ''}
        </div>
      `).join('');
    }

    document.getElementById('formulario').addEventListener('submit', e => {
      e.preventDefault();
      const nombre = document.getElementById('nombre').value || 'An√≥nimo';
      const comentario = document.getElementById('comentario').value.trim();
      parametros.forEach(p => {
        if (typeof calificacionActual[p] === 'undefined') calificacionActual[p] = 3;
        calificacionActual[p] = Number(calificacionActual[p]);
      });
      const sumaFactores = parametros.reduce((acc, p) => acc + (Number(calificacionActual[p]) || 0), 0);
      const promedioFinal = +(sumaFactores / parametros.length).toFixed(2);
      const nueva = {id: Date.now(), fecha: new Date().toISOString(), nombre, comentario, promedio: promedioFinal};
      entradas.unshift(nueva);
      guardarLocal();
      actualizarEstadisticas();
      e.target.reset();
      calificacionActual = {};
      renderParametros();
    });

    document.getElementById('btn-limpiar').addEventListener('click', () => {
      document.getElementById('formulario').reset();
      calificacionActual = {};
      renderParametros();
    });

    document.getElementById('btn-borrar').addEventListener('click', () => {
      if (!confirm('¬øBorrar todas las entradas guardadas?')) return;
      entradas = [];
      guardarLocal();
      actualizarEstadisticas();
    });

    document.getElementById('btn-pdf').addEventListener('click', () => {
      if (entradas.length === 0) return alert('No hay datos para exportar');
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      let y = 20;
      doc.setFontSize(16);
      doc.text('Reporte de Calificaciones - Aplicativo Educativo', 10, y);
      y += 10;
      doc.setFontSize(12);
      entradas.slice(0, 10).forEach((e, idx) => {
        doc.text(`Entrada ${idx + 1}`, 10, y); y += 6;
        doc.text(`Fecha: ${new Date(e.fecha).toLocaleString()}`, 10, y); y += 6;
        doc.text(`Nombre: ${e.nombre}`, 10, y); y += 6;
        doc.text(`Promedio: ${e.promedio} / 5`, 10, y); y += 6;
        if (e.comentario) { doc.text(`Comentario: ${e.comentario}`, 10, y); y += 10; }
        else { y += 4; }
        if (y > 270) { doc.addPage(); y = 20; }
      });
      doc.save('reporte_calificaciones.pdf');
    });

    renderParametros();
    actualizarEstadisticas();

    // üîπ Navegaci√≥n
    const botones = document.querySelectorAll('.nav-btn');
    const secciones = document.querySelectorAll('section');
    botones.forEach(boton => {
      boton.addEventListener('click', () => {
        botones.forEach(b => b.classList.remove('activo'));
        secciones.forEach(s => s.classList.remove('activo'));
        boton.classList.add('activo');
        document.getElementById(boton.dataset.seccion).classList.add('activo');
      });
    });
  </script>
</body>
</html>
